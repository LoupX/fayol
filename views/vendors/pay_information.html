{{extend 'base/layout.html'}}

{{block scripts_extra}}	
<script type="text/javascript" src="{{=URL('static', 'js/plugins/jquery.validate.min.js')}}"></script>
<script type="text/javascript" src="{{=URL('static', 'js/custom/forms.js')}}"></script>
<script type="text/javascript" src="{{=URL('static', 'js/plugins/jquery.tagsinput.min.js')}}"></script>
<script type="text/javascript" src="{{=URL('static', 'js/plugins/charCount.js')}}"></script>
<script type="text/javascript" src="{{=URL('static', 'js/plugins/ui.spinner.min.js')}}"></script>
<script type="text/javascript" src="{{=URL('static', 'js/plugins/chosen.jquery.min.js')}}"></script>
{{end}}

{{block sidebar_menu}}
{{include 'vendors/sidebar.html'}}
{{end}}

{{block content}}
    <div class="centercontent">
    
        <div class="pageheader">
        
            <h1 class="pagetitle">{{=title}}</h1>
            
        </div><!--pageheader-->
        
        <div id="contentwrapper" class="contentwrapper">
	   		
	   		<div class="contenttitle2">
	              <h3>Selecciona un proveedor</h3>
            </div><!--contenttitle-->            	
				<div id="validation" class="subcontent">
				
				<form id="form_ventor" class="stdform stdform2" method="post" action="">
                    	                        
                        <p>
                        	<label>Proveedor</label>
                            <span class="field">
                                <select id="vendor" name="vendor" data-placeholder="Seleccionar" class="chzn-select" style="width:350px;" tabindex="3">
                                  </select>
                            </span>
                        </p>
                        
                    </form><br />
				
					<div class="contenttitle2">
                        <h3>Información de pago</h3>
                    </div><!--contenttitle-->
            	
            	
                    <form id="form" class="stdform stdform2" method="post" action="">
                        
                        <p>
                        	<label>Banco</label>
                            <span class="field">
                                <select id="bank" name="bank" data-placeholder="Seleccionar" class="chzn-select" style="width:350px;" tabindex="3">
                                </select>
                            </span>
                        </p>
                        
                        <p style="margin-top: 1px;">
                        	<label>Número de Sucursal</label>
                            <span class="field"><input type="text" name="branch" id="branch" class="smallinput" /></span>
                        </p>
                        
                        <p>
                        	<label>Número de cuenta</label>
                            <span class="field"><input type="text" name="acountnumber" id="acountnumber" class="smallinput" /></span>
                        </p>
                        
                        <p>
                        	<label>CLABE</label>
                            <span class="field"><input type="text" name="clabe" id="clabe" class="smallinput" maxlength="18"/></span>
                        </p>
                        
                        <p class="stdformbutton">
                        	<button class="submit radius2">Guardar</button>
                        </p>
                    </form>

            </div><!--subcontent-->      
        
        </div><!--contentwrapper-->
        
        <br clear="all" />
        
	</div><!-- centercontent -->
    
    
</div><!--bodywrapper-->

<script type="text/javascript">
//executes these ajax when document is loaded
//
jQuery.ajax({
    url: "{{=URL(c='common', f='get_banks')}}",
    type: "POST",
    success:function(data){
      jQuery('#bank').append(data);
    }
}); 

    jQuery("#form").validate({
        rules: {
            vendor: "required",
            lastname: "required",
            clabe: {
                required: false,
                digits: true
            },
        },
        messages: {
            clabe: "Este campo debe tener sólo números.",
            vendor: "Seleccione un proveedor",
        }
    });

    jQuery('#submit').click(function(e){
        e.preventDefault();
        
        jQuery.ajax({
            url: "{{=URL(c='vendors', f='vendor_payinformation')}}",
            data: { 
                bank:jQuery('#bank').val(),
                branch:jQuery('#branch').val(),
                acountnumber:jQuery('#acountnumber').val(),
                clabe:jQuery('#clabe').val(),
            },
            type: "POST",
            success:function(data){
                if(data){
                    alert("Se a guardado exitosamente");    
                }
                else{
                    alert("Se a producido un error al guardar");
                }
            }
        }); 
    });
            
            
</script>

</body>
</html>
{{end}}
